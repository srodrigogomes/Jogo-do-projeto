<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treinamento de Defesa - Naruto no Multiverso (Edi√ß√£o Completa)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&family=Inter:wght@400;600;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
            background-image: radial-gradient(#1e293b 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .code-font {
            font-family: 'Fira Code', monospace;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        .option-btn {
            transition: all 0.2s ease;
        }
        .option-btn:hover {
            transform: translateX(5px);
            background-color: rgba(255, 159, 67, 0.1);
            border-color: #ff9f43;
        }
        
        .correct {
            background-color: rgba(46, 204, 113, 0.2) !important;
            border-color: #2ecc71 !important;
            color: #2ecc71;
        }

        .wrong {
            background-color: rgba(231, 76, 60, 0.2) !important;
            border-color: #e74c3c !important;
            color: #e74c3c;
        }

        .btn-disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        /* Scrollbar customizada para a lista de perguntas longa */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #334155; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569; 
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in {
            animation: slideIn 0.4s ease forwards;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="max-w-4xl w-full">
        <!-- Header -->
        <header class="flex items-center justify-between mb-8">
            <div class="flex items-center gap-4">
                <div class="w-16 h-16 rounded-xl bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center text-white font-bold text-2xl shadow-lg shadow-orange-500/20">
                    NM
                </div>
                <div>
                    <h1 class="text-2xl font-bold text-white">Naruto: Code Defense</h1>
                    <p class="text-sm text-slate-400">Simulador Completo (50 Perguntas)</p>
                </div>
            </div>
            <div class="text-right">
                <div class="text-xs text-slate-400 uppercase tracking-wider">Score</div>
                <div class="text-3xl font-bold text-orange-400" id="scoreDisplay">00</div>
            </div>
        </header>

        <!-- Game Area -->
        <main id="gameContainer" class="glass-panel rounded-2xl p-8 relative overflow-hidden min-h-[600px]">
            <!-- Progress Bar -->
            <div class="absolute top-0 left-0 h-1 bg-slate-700 w-full">
                <div class="h-full bg-gradient-to-r from-orange-500 to-red-500 transition-all duration-300" id="progressBar" style="width: 0%"></div>
            </div>

            <!-- Start Screen -->
            <div id="startScreen" class="text-center py-10 h-full flex flex-col justify-center items-center">
                <div class="mb-6 inline-block p-6 rounded-full bg-slate-800 border border-slate-700 animate-bounce">
                    <i class="fas fa-scroll text-5xl text-orange-400"></i>
                </div>
                <h2 class="text-4xl font-bold mb-4 text-white">Exame Chunin de C√≥digo</h2>
                <p class="text-slate-400 mb-8 max-w-lg mx-auto text-lg leading-relaxed">
                    Voc√™ tem <strong>50 perguntas</strong> pela frente cobrindo cada linha do c√≥digo do seu projeto.
                    <br><br>
                    <span class="text-orange-400 font-bold">Objetivo:</span> Provar que voc√™ domina Ponteiros, Structs, Raylib e L√≥gica de Arquivos.
                </p>
                <button onclick="startGame()" class="px-10 py-4 bg-orange-500 hover:bg-orange-600 text-white font-bold text-lg rounded-xl transition-colors shadow-lg shadow-orange-500/20 flex items-center gap-3">
                    <i class="fas fa-play"></i> Iniciar Desafio
                </button>
            </div>

            <!-- Question Screen -->
            <div id="questionScreen" class="hidden">
                <div class="flex justify-between items-center mb-8">
                    <span class="text-xs font-bold text-white uppercase tracking-widest bg-orange-500/20 border border-orange-500/30 text-orange-400 px-4 py-1.5 rounded-full" id="questionCategory">CATEGORIA</span>
                    <span class="text-sm font-mono text-slate-400 bg-slate-800 px-3 py-1 rounded border border-slate-700">Q: <span id="currentQ">1</span>/<span id="totalQ">50</span></span>
                </div>

                <h3 class="text-xl md:text-2xl font-semibold mb-8 leading-relaxed text-white min-h-[80px]" id="questionText">
                    Carregando...
                </h3>

                <div class="grid grid-cols-1 gap-3 mb-6" id="optionsContainer">
                    <!-- Op√ß√µes injetadas via JS -->
                </div>

                <!-- Feedback Area -->
                <div id="feedbackArea" class="hidden p-6 rounded-xl bg-slate-800/80 border border-slate-600 slide-in shadow-2xl">
                    <div class="flex items-start gap-4">
                        <div id="feedbackIconContainer" class="p-2 rounded-full bg-slate-700 shrink-0">
                            <i id="feedbackIcon" class="fas fa-check text-xl"></i>
                        </div>
                        <div class="flex-1">
                            <h4 class="text-lg font-bold text-white mb-2" id="feedbackTitle">Feedback</h4>
                            <p class="text-slate-300 leading-relaxed text-sm" id="feedbackText"></p>
                        </div>
                    </div>
                    <button onclick="nextQuestion()" class="mt-6 w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-lg transition-colors shadow-lg shadow-blue-500/20">
                        Pr√≥xima <i class="fas fa-chevron-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- Result Screen -->
            <div id="resultScreen" class="hidden text-center py-10">
                <div id="rankIcon" class="text-7xl mb-6 animate-pulse">üèÜ</div>
                <h2 class="text-4xl font-bold text-white mb-2">Exame Finalizado!</h2>
                <p class="text-slate-400 mb-8 text-lg">Seu n√≠vel ninja de programa√ß√£o √©:</p>
                
                <div class="text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-yellow-300 mb-4" id="finalScore">0</div>
                <div class="text-2xl font-bold text-white mb-10 bg-slate-800 inline-block px-8 py-3 rounded-xl border border-slate-700 shadow-xl" id="finalRank">RANK</div>

                <div class="grid grid-cols-2 gap-6 mb-10 text-left max-w-md mx-auto">
                    <div class="bg-slate-800/50 p-5 rounded-xl border border-slate-700 backdrop-blur-sm">
                        <div class="text-xs text-slate-500 uppercase font-bold mb-1">Acertos</div>
                        <div class="text-3xl font-bold text-green-400" id="correctCount">0</div>
                    </div>
                    <div class="bg-slate-800/50 p-5 rounded-xl border border-slate-700 backdrop-blur-sm">
                        <div class="text-xs text-slate-500 uppercase font-bold mb-1">Erros</div>
                        <div class="text-3xl font-bold text-red-400" id="wrongCount">0</div>
                    </div>
                </div>

                <button onclick="location.reload()" class="px-8 py-3 bg-slate-700 hover:bg-slate-600 text-white font-bold rounded-lg transition-colors border border-slate-600">
                    <i class="fas fa-redo mr-2"></i> Refazer Teste
                </button>
            </div>
        </main>

        <!-- Footer -->
        <footer class="mt-8 text-center text-xs text-slate-600">
            <p>Desenvolvido para a defesa do projeto Naruto no Multiverso &bull; C + Raylib</p>
        </footer>
    </div>

    <script>
        // ==========================================
        // BANCO DE DADOS COMPLETO (50 PERGUNTAS)
        // ==========================================
        const questions = [
            // --- MEM√ìRIA & ALOCA√á√ÉO ---
            {
                category: "MEM√ìRIA",
                text: "Em <code>palavras.c</code>, usamos <code>realloc</code>. Se o <code>realloc</code> falhar (retornar NULL), o que acontece com o ponteiro original da lista?",
                options: ["Ele √© perdido (Memory Leak).", "Ele √© liberado automaticamente.", "Ele permanece inalterado e seguro.", "Ele vira NULL tamb√©m."],
                correct: 2,
                explanation: "Se falhar, o <code>realloc</code> retorna NULL mas <strong>n√£o libera</strong> o bloco original. Por isso usamos <code>temp = realloc(...)</code>. Se fiz√©ssemos <code>ptr = realloc(ptr...)</code> perder√≠amos o endere√ßo original em caso de falha."
            },
            {
                category: "MEM√ìRIA",
                text: "Na fun√ß√£o <code>liberarPalavras</code>, usamos <code>free(lista)</code>. Por que n√£o precisamos fazer um loop para liberar cada palavra individualmente?",
                options: ["Porque o C tem Garbage Collector.", "Porque as palavras s√£o strings est√°ticas (char array) dentro da struct, n√£o ponteiros alocados separadamente.", "Porque o sistema operacional limpa tudo.", "Porque esquecemos de implementar."],
                correct: 1,
                explanation: "A struct <code>Palavra</code> tem <code>char palavra[30]</code> (array fixo), n√£o <code>char *palavra</code>. Logo, elas vivem dentro do bloco principal da struct. Um √∫nico <code>free(lista)</code> libera o bloc√£o inteiro."
            },
            {
                category: "MEM√ìRIA",
                text: "O que a fun√ß√£o <code>memset(estado, 0, sizeof(EstadoJogo))</code> faz exatamente em <code>jogo.c</code>?",
                options: ["Aloca mem√≥ria para o jogo.", "Define todas as vari√°veis da struct como 0 (int) ou NULL (ponteiros) ou false (bool).", "Apaga o save do jogo.", "Carrega as texturas iniciais."],
                correct: 1,
                explanation: "<code>memset</code> preenche os bytes da mem√≥ria com 0. Isso √© vital para n√£o ter 'lixo de mem√≥ria' (valores aleat√≥rios) nas vari√°veis <code>venceu</code>, <code>tentativaAtual</code>, etc."
            },
            // --- ARQUIVOS (CSV & BIN√ÅRIO) ---
            {
                category: "ARQUIVOS",
                text: "No c√≥digo, usamos <code>fopen(nome, \"rb\")</code> para ler o save. O que o \"b\" significa?",
                options: ["Backup mode.", "Binary mode (Modo Bin√°rio).", "Buffered mode.", "Basic mode."],
                correct: 1,
                explanation: "O 'b' indica que o arquivo deve ser tratado como bin√°rio, sem tradu√ß√£o de caracteres especiais (como quebras de linha) que ocorre no modo texto."
            },
            {
                category: "ARQUIVOS",
                text: "A fun√ß√£o <code>fgets</code> l√™ o arquivo CSV. Qual problema comum do <code>fgets</code> resolvemos com <code>strcspn</code>?",
                options: ["Ele l√™ apenas metade da linha.", "Ele inclui o caractere '\\n' (Enter) no final da string lida.", "Ele ignora espa√ßos em branco.", "Ele n√£o l√™ n√∫meros."],
                correct: 1,
                explanation: "O <code>fgets</code> captura o 'Enter' que voc√™ deu no final da linha. <code>linha[strcspn(..., '\\n')] = 0</code> acha esse enter e o substitui por um finalizador nulo para limpar a string."
            },
            {
                category: "ARQUIVOS",
                text: "Se o arquivo <code>assets/palavras.csv</code> n√£o existir, o que a fun√ß√£o <code>carregarPalavrasIniciais</code> faz?",
                options: ["Fecha o jogo (Crash).", "Exibe uma mensagem de erro e sai.", "Chama <code>adicionarPalavraDireta</code> para carregar palavras 'hardcoded' (padr√£o) no c√≥digo.", "Cria um arquivo vazio."],
                correct: 2,
                explanation: "O c√≥digo tem um sistema de <strong>Fallback</strong>. Se o arquivo falhar (fopen retorna NULL), ele carrega manualmente palavras como 'Goku' e 'Naruto' que est√£o escritas no pr√≥prio c√≥digo C."
            },
            {
                category: "ARQUIVOS",
                text: "Por que usamos arquivos bin√°rios (<code>.dat</code>) para o save e CSV para as palavras?",
                options: ["N√£o tem motivo, foi aleat√≥rio.", "Bin√°rio √© mais seguro/r√°pido para dados de sistema (save), CSV √© leg√≠vel para humanos editarem (configura√ß√£o).", "CSV √© mais r√°pido que bin√°rio.", "Bin√°rio ocupa mais espa√ßo."],
                correct: 1,
                explanation: "Essa √© uma decis√£o de arquitetura. CSV permite que qualquer um adicione palavras facilmente. Bin√°rio (`fwrite`) protege o progresso do jogador contra edi√ß√µes simples no bloco de notas."
            },
            // --- L√ìGICA DO JOGO ---
            {
                category: "L√ìGICA",
                text: "Em <code>jogo.c</code>, para verificar se o jogador venceu, usamos a vari√°vel <code>int todasCorretas = 1</code>. Como ela funciona?",
                options: ["Ela conta quantas letras est√£o certas.", "Ela assume que o jogador ganhou, e se encontrar UMA letra errada, muda para 0.", "Ela √© um booleano da Raylib.", "Ela compara strings inteiras."],
                correct: 1,
                explanation: "√â uma l√≥gica otimista. Come√ßamos assumindo vit√≥ria. Percorremos as letras; se acharmos *qualquer* erro, setamos <code>todasCorretas = 0</code>. Se o loop terminar e ela ainda for 1, √© vit√≥ria."
            },
            {
                category: "L√ìGICA",
                text: "Por que usamos <code>toupper(letra)</code> na fun√ß√£o <code>adicionarLetra</code>?",
                options: ["Para deixar o texto bonito.", "Porque C √© case-sensitive ('a' != 'A'), e precisamos padronizar para comparar com a senha.", "Porque o teclado s√≥ tem letras mai√∫sculas.", "Para economizar mem√≥ria."],
                correct: 1,
                explanation: "Na tabela ASCII, 'a' √© 97 e 'A' √© 65. Se n√£o convertermos, o jogador pode digitar 'goku' e o jogo n√£o reconhecer√° se a senha for 'GOKU'."
            },
            {
                category: "L√ìGICA",
                text: "Como o jogo impede que o jogador digite mais letras do que o permitido (ex: 6 letras numa palavra de 5)?",
                options: ["N√£o impede, o jogo crasha.", "Verifica <code>if (estado->posEntrada >= tamanhoPalavra)</code> antes de adicionar.", "O Raylib limita automaticamente.", "A struct n√£o tem espa√ßo."],
                correct: 1,
                explanation: "Existe uma verifica√ß√£o expl√≠cita (Guard Clause) no in√≠cio da fun√ß√£o <code>adicionarLetra</code> que barra a entrada se o cursor j√° estiver no limite."
            },
            // --- RAYLIB & GR√ÅFICOS ---
            {
                category: "RAYLIB",
                text: "O que acontece se voc√™ chamar <code>DrawTexture</code> fora do bloco <code>BeginDrawing() / EndDrawing()</code>?",
                options: ["Funciona normal.", "O jogo fecha.", "Nada √© desenhado ou o comportamento √© indefinido (tela pisca).", "A textura fica preta."],
                correct: 2,
                explanation: "A GPU precisa ser preparada para receber comandos de desenho. <code>BeginDrawing</code> limpa buffers e prepara o contexto gr√°fico. Desenhar fora disso √© ignorado."
            },
            {
                category: "RAYLIB",
                text: "Qual a fun√ß√£o do <code>SetTargetFPS(60)</code> em <code>interface.c</code>?",
                options: ["Deixar o jogo mais r√°pido poss√≠vel.", "Travar o jogo para n√£o passar de 60 quadros por segundo, garantindo velocidade constante.", "Melhorar a resolu√ß√£o.", "Carregar texturas mais r√°pido."],
                correct: 1,
                explanation: "Sem limitar o FPS, o jogo tentaria rodar a 2000 FPS em PCs potentes, consumindo 100% da CPU/GPU desnecessariamente e podendo bugar a f√≠sica (se n√£o usar DeltaTime)."
            },
            {
                category: "RAYLIB",
                text: "Por que usamos <code>UnloadTexture</code> e <code>UnloadMusicStream</code> ao sair do jogo ou trocar de fase?",
                options: ["Para salvar o jogo.", "Para evitar Memory Leaks (Vazamento de Mem√≥ria) na VRAM (Placa de V√≠deo).", "Para apagar os arquivos do computador.", "O Raylib obriga."],
                correct: 1,
                explanation: "Recursos gr√°ficos e de √°udio s√£o pesados. Se carregarmos fases novas sem limpar as antigas, a mem√≥ria RAM/VRAM vai encher at√© o jogo travar."
            },
            {
                category: "RAYLIB",
                text: "A fun√ß√£o <code>CheckCollisionPointRec</code> √© usada no teclado virtual. O que ela faz?",
                options: ["Verifica se duas texturas colidiram.", "Verifica se o ponto do mouse (X,Y) est√° dentro do ret√¢ngulo da tecla.", "Verifica se o jogador venceu.", "Detecta colis√£o de f√≠sica 3D."],
                correct: 1,
                explanation: "√â a base da intera√ß√£o de UI (Interface). Ela retorna <code>true</code> se o mouse estiver em cima do bot√£o, permitindo o clique."
            },
            // --- ARQUITETURA & C ---
            {
                category: "ARQUITETURA",
                text: "O que significa <code>#ifndef HEADER_H</code> no topo dos arquivos .h?",
                options: ["Include Guard: impede que o mesmo arquivo .h seja inclu√≠do duplicado, evitando erros de compila√ß√£o.", "Coment√°rio de cabe√ßalho.", "Define uma vari√°vel global.", "Inclui a biblioteca padr√£o."],
                correct: 0,
                explanation: "Se voc√™ incluir `jogo.h` no `main.c` e no `interface.c`, o compilador tentaria definir as structs duas vezes. O Include Guard previne isso."
            },
            {
                category: "ARQUITETURA",
                text: "No <code>main.c</code>, temos um <code>switch(telaAtual)</code> dentro do loop. Que padr√£o √© esse?",
                options: ["Observer.", "Singleton.", "M√°quina de Estados Finita (State Machine).", "Factory."],
                correct: 2,
                explanation: "O jogo tem estados claros (MENU, JOGO, CINEMATICA) e transita entre eles. O loop principal apenas executa o que o estado atual manda."
            },
            {
                category: "SINTAXE C",
                text: "Qual a diferen√ßa entre <code>struct Palavra p</code> e <code>Palavra p</code> no seu c√≥digo?",
                options: ["Nenhuma.", "Usamos <code>typedef</code> no .h, ent√£o podemos usar apenas <code>Palavra</code> como um tipo, sem escrever struct antes.", "Uma √© ponteiro, a outra n√£o.", "Uma √© global, a outra local."],
                correct: 1,
                explanation: "O comando <code>typedef struct { ... } Nome;</code> cria um apelido. Isso deixa o c√≥digo mais limpo, evitando repetir a palavra 'struct' toda hora."
            },
            {
                category: "MAKEFILE",
                text: "No Makefile, o que a linha <code>ifeq ($(OS),Windows_NT)</code> faz?",
                options: ["Instala o Windows.", "Verifica se est√° compilando no Windows para ajustar comandos (mkdir vs mkdir -p) e bibliotecas (.exe).", "Apaga o Linux.", "Roda o jogo."],
                correct: 1,
                explanation: "Isso torna o Makefile 'Cross-Platform'. Ele ajusta as flags de compila√ß√£o automaticamente dependendo de onde voc√™ est√° programando."
            },
            {
                category: "MAKEFILE",
                text: "O que s√£o os arquivos <code>.o</code> na pasta <code>obj/</code>?",
                options: ["Arquivos de save.", "C√≥digo fonte otimizado.", "Object Files: c√≥digo compilado de cada .c, mas ainda n√£o linkado no execut√°vel final.", "Arquivos de erro."],
                correct: 2,
                explanation: "O compilador transforma cada .c em um .o (c√≥digo de m√°quina parcial). Depois, o Linker junta todos os .o + bibliotecas (raylib) para criar o .exe."
            },
            {
                category: "CINEM√ÅTICA",
                text: "Como os di√°logos quebram linha na cinem√°tica? O Raylib faz autom√°tico?",
                options: ["Sim, o DrawText faz autom√°tico.", "N√£o, usamos <code>strtok</code> com o caractere '|' para dividir o texto manualmente e desenhar linha por linha.", "N√£o, usamos CSS.", "O texto n√£o quebra linha."],
                correct: 1,
                explanation: "A fun√ß√£o <code>DrawText</code> b√°sica n√£o quebra linha. Implementamos uma l√≥gica manual usando o pipe '|' como marcador de quebra."
            },
            // --- NOVAS PERGUNTAS (N√çVEL AVAN√áADO) ---
            {
                category: "SINTAXE C",
                text: "O que <code>const char *dica</code> significa no par√¢metro de uma fun√ß√£o?",
                options: ["A fun√ß√£o vai alterar a dica.", "A fun√ß√£o promete N√ÉO alterar o conte√∫do do texto da dica (Read-only).", "√â um ponteiro para um ponteiro.", "√â uma vari√°vel global."],
                correct: 1,
                explanation: "O <code>const</code> √© uma promessa de seguran√ßa. Ele diz: 'Vou ler esse texto para desenhar na tela, mas garanto que n√£o vou mexer nele'."
            },
            {
                category: "PONTEIROS",
                text: "Por que passamos <code>EstadoJogo *estado</code> (ponteiro) para as fun√ß√µes, e n√£o <code>EstadoJogo estado</code>?",
                options: ["Para economizar mem√≥ria e permitir que a fun√ß√£o altere o estado original.", "Porque a struct √© muito pequena.", "Porque C obriga.", "Para criar uma c√≥pia do jogo."],
                correct: 0,
                explanation: "Se pass√°ssemos por valor (sem *), a fun√ß√£o receberia uma C√ìPIA. Se o jogador ganhasse, a c√≥pia ganharia, mas o jogo real n√£o. O ponteiro permite alterar o original."
            },
            {
                category: "DEBUG",
                text: "O que √© a pasta <code>.vscode</code> que aparece na estrutura?",
                options: ["Parte do c√≥digo fonte do jogo.", "Configura√ß√µes locais do editor VS Code (tasks, launch). N√£o deve ser enviada se for s√≥ para o professor compilar via Makefile.", "V√≠rus.", "Biblioteca do Raylib."],
                correct: 1,
                explanation: "S√£o arquivos de configura√ß√£o do ambiente de desenvolvimento, n√£o do jogo em si. O professor pode nem usar VS Code."
            },
            {
                category: "√ÅUDIO",
                text: "Qual a diferen√ßa entre <code>Music</code> e <code>Sound</code> na Raylib (usamos Music para trilha)?",
                options: ["Nenhuma.", "Sound √© para sons curtos (carregado na RAM), Music √© para longos (stream do disco).", "Music tem melhor qualidade.", "Sound √© mono, Music √© est√©reo."],
                correct: 1,
                explanation: "Para trilhas sonoras longas, usamos <code>Music</code> porque ela vai lendo o arquivo aos poucos (streaming). Se carreg√°ssemos 5 min de √°udio na RAM (Sound), pesaria muito."
            },
            {
                category: "L√ìGICA",
                text: "Na fun√ß√£o <code>selecionarPalavraAleatoria</code>, usamos <code>rand() % count</code>. O que isso faz?",
                options: ["Gera um n√∫mero aleat√≥rio gigante.", "Gera um n√∫mero aleat√≥rio entre 0 e count-1 (garante que o √≠ndice √© v√°lido).", "Calcula porcentagem.", "Divide por zero."],
                correct: 1,
                explanation: "O operador m√≥dulo `%` pega o resto da divis√£o. Isso garante que o n√∫mero aleat√≥rio nunca seja maior que a quantidade de palavras dispon√≠veis, evitando acessar mem√≥ria inv√°lida."
            },
            {
                category: "SINTAXE C",
                text: "Para que serve <code>srand((unsigned int)time(NULL))</code> no in√≠cio da main/carregar?",
                options: ["Para pausar o tempo.", "Para inicializar a semente do gerador aleat√≥rio com o tempo atual, garantindo jogos diferentes a cada execu√ß√£o.", "Para carregar o rel√≥gio.", "Para definir o FPS."],
                correct: 1,
                explanation: "Se n√£o usarmos <code>srand</code>, a fun√ß√£o <code>rand()</code> vai gerar sempre a mesma sequ√™ncia de n√∫meros toda vez que abrir o jogo (o jogo ficaria repetitivo)."
            },
            {
                category: "CINEM√ÅTICA",
                text: "Em <code>cinematica.c</code>, usamos <code>GetFrameTime()</code> para mover o Naruto. Por qu√™?",
                options: ["Para saber a hora.", "Para fazer o movimento ser independente da taxa de quadros (FPS), garantindo velocidade constante em PCs lentos e r√°pidos.", "Para desenhar frame a frame.", "Para carregar a textura."],
                correct: 1,
                explanation: "Isso √© o conceito de **Delta Time**. Se o PC for lento, o FrameTime √© maior, e o boneco anda mais para compensar. Se for r√°pido, anda menos. O resultado visual √© velocidade constante."
            },
            {
                category: "ESTRUTURA",
                text: "O que √© <code>enum { TELA_MENU, TELA_JOGO ... }</code>?",
                options: ["Uma lista de strings.", "Uma numera√ß√£o autom√°tica (0, 1, 2...) para deixar o c√≥digo mais leg√≠vel.", "Uma struct.", "Uma fun√ß√£o."],
                correct: 1,
                explanation: "Enums s√£o inteiros disfar√ßados. √â muito mais f√°cil ler <code>case TELA_MENU:</code> do que <code>case 0:</code>. Facilita a manuten√ß√£o."
            },
            {
                category: "MEM√ìRIA",
                text: "O que √© <code>Buffer Overflow</code> e onde evitamos isso no c√≥digo?",
                options: ["√â quando o buffer de v√≠deo enche.", "√â escrever al√©m do limite de um array. Evitamos usando <code>strncpy</code> em vez de <code>strcpy</code> ao ler o CSV.", "√â quando o teclado trava.", "√â um comando do Git."],
                correct: 1,
                explanation: "Se a palavra no CSV tiver 100 letras e nosso array for <code>char[30]</code>, o strcpy comum invadiria a mem√≥ria vizinha. O <code>strncpy</code> limita a c√≥pia ao tamanho do destino."
            },
            {
                category: "RAYLIB",
                text: "Para que serve <code>MeasureText(texto, fonte)</code> em <code>interface.c</code>?",
                options: ["Para ver se o texto cabe na mem√≥ria.", "Para calcular a largura em pixels do texto antes de desenhar, permitindo centraliz√°-lo na tela.", "Para contar letras.", "Para mudar a fonte."],
                correct: 1,
                explanation: "Usamos a matem√°tica: <code>X = (LarguraTela - LarguraTexto) / 2</code> para centralizar t√≠tulos. O MeasureText nos d√° essa largura."
            },
            {
                category: "L√ìGICA",
                text: "O que a fun√ß√£o <code>strcat</code> faria se a us√°ssemos?",
                options: ["Cortaria a string.", "Concatenaria (juntaria) duas strings.", "Copiaria a string.", "Compararia strings."],
                correct: 1,
                explanation: "Embora n√£o muito usada na l√≥gica principal (usamos mais strcpy), √© importante saber: strcat cola uma string no final da outra."
            },
            {
                category: "L√ìGICA",
                text: "O que <code>return true</code> faz dentro de uma fun√ß√£o <code>bool</code>?",
                options: ["Retorna 1 e encerra a fun√ß√£o.", "Retorna 0.", "Imprime verdadeiro.", "Continua a fun√ß√£o."],
                correct: 0,
                explanation: "Em C (com stdbool.h), true √© 1 e false √© 0. O return encerra a execu√ß√£o daquela fun√ß√£o imediatamente e devolve o valor para quem chamou."
            },
            {
                category: "ARQUIVOS",
                text: "Se eu quiser resetar o progresso manualmente, o que devo fazer?",
                options: ["Apagar a pasta assets.", "Apagar o arquivo <code>progresso.dat</code>.", "Recompilar o c√≥digo.", "Apagar o execut√°vel."],
                correct: 1,
                explanation: "O arquivo .dat cont√©m os dados salvos. Apag√°-lo for√ßa o jogo a criar um novo na pr√≥xima execu√ß√£o, resetando tudo."
            },
            {
                category: "SINTAXE C",
                text: "O que o operador <code>-></code> faz (ex: <code>estado->venceu</code>)?",
                options: ["√â uma seta decorativa.", "Acessa um campo de uma struct atrav√©s de um PONTEIRO.", "Acessa um campo de uma struct direta.", "Move o dado para a direita."],
                correct: 1,
                explanation: "√â um atalho sint√°tico. <code>estado->venceu</code> √© exatamente o mesmo que <code>(*estado).venceu</code>. Usamos quando temos o endere√ßo da struct, n√£o a struct em si."
            },
            {
                category: "RAYLIB",
                text: "Para que serve <code>ClearBackground(BLACK)</code> no in√≠cio de cada desenho?",
                options: ["Para pintar o fundo de preto.", "Para limpar o que foi desenhado no frame anterior, sen√£o ficaria um borr√£o de imagens sobrepostas.", "Para desligar a tela.", "Para economizar energia."],
                correct: 1,
                explanation: "Como num caderno de desenho, precisamos de uma p√°gina limpa a cada frame. Se n√£o limparmos, ver√≠amos o 'rastro' do Naruto se movendo."
            },
            {
                category: "L√ìGICA",
                text: "Na l√≥gica de <code>fazerTentativa</code>, o que significa <code>memset(estado->entradaAtual, 0...)</code> no final?",
                options: ["Apaga o save.", "Limpa o buffer de digita√ß√£o para que a pr√≥xima palavra comece vazia.", "Reinicia o jogo.", "Bloqueia o teclado."],
                correct: 1,
                explanation: "Depois que o jogador aperta Enter e a palavra √© processada, precisamos limpar o campo onde ele digita para ele poder escrever a pr√≥xima tentativa."
            },
            {
                category: "SINTAXE C",
                text: "O que √© <code>#include \"jogo.h\"</code> (com aspas) vs <code>#include &lt;stdio.h&gt;</code> (com menor/maior)?",
                options: ["Nenhuma diferen√ßa.", "Aspas buscam arquivos no diret√≥rio do projeto (locais); <> buscam nas pastas do sistema/compilador.", "Aspas s√£o para C++, <> para C.", "Inverso da op√ß√£o B."],
                correct: 1,
                explanation: "Arquivos que N√ìS criamos usamos aspas. Bibliotecas padr√£o do C usamos <>."
            },
            {
                category: "MAKEFILE",
                text: "O comando <code>make clean</code> serve para:",
                options: ["Limpar o c√≥digo fonte.", "Apagar os arquivos compilados (.o, .exe) para for√ßar uma recompila√ß√£o limpa do zero.", "Organizar a indenta√ß√£o.", "Verificar erros."],
                correct: 1,
                explanation: "√Äs vezes o compilador se perde com arquivos antigos. O clean apaga tudo que foi gerado (bin e obj) para garantir que o pr√≥ximo build seja fresco."
            },
            {
                category: "CINEM√ÅTICA",
                text: "O que significa <code>static</code> antes de uma fun√ß√£o (se houvesse)?",
                options: ["A fun√ß√£o n√£o muda.", "A fun√ß√£o √© vis√≠vel apenas dentro daquele arquivo .c (encapsulamento).", "A fun√ß√£o √© r√°pida.", "A fun√ß√£o √© global."],
                correct: 1,
                explanation: "Embora n√£o tenhamos usado muito, √© bom saber: static em fun√ß√µes limita o escopo, impedindo que outros arquivos acessem aquela fun√ß√£o diretamente."
            },
            {
                category: "GERAL",
                text: "Onde est√° o ponto de entrada (Entry Point) do programa?",
                options: ["No arquivo jogo.c", "Na fun√ß√£o <code>main</code> do arquivo main.c", "No Makefile", "Na primeira linha do c√≥digo"],
                correct: 1,
                explanation: "Todo programa C come√ßa a execu√ß√£o pela fun√ß√£o chamada <code>main</code>."
            },
            {
                category: "MEM√ìRIA",
                text: "O que acontece se fizermos <code>malloc</code> mas esquecermos do <code>free</code>?",
                options: ["Nada.", "O computador fica mais r√°pido.", "Ocorre Memory Leak (a mem√≥ria fica ocupada at√© o PC reiniciar ou o programa fechar).", "O compilador avisa."],
                correct: 2,
                explanation: "Em jogos de longa dura√ß√£o, leaks podem consumir toda a RAM do usu√°rio e travar a m√°quina."
            },
            {
                category: "RAYLIB",
                text: "A fun√ß√£o <code>WindowShouldClose()</code> retorna true quando?",
                options: ["O jogo acaba.", "O usu√°rio aperta ESC ou clica no 'X' da janela.", "O computador desliga.", "Sempre."],
                correct: 1,
                explanation: "√â a condi√ß√£o de parada do loop principal. Ela detecta a inten√ß√£o do usu√°rio de fechar o programa."
            },
            {
                category: "ARQUIVOS",
                text: "O que <code>FILE *arquivo</code> representa?",
                options: ["O conte√∫do do arquivo na RAM.", "Um ponteiro para o fluxo (stream) do arquivo, usado para control√°-lo.", "O nome do arquivo.", "Um backup."],
                correct: 1,
                explanation: "N√£o √© o arquivo inteiro na mem√≥ria, √© apenas um 'controle remoto' que o C usa para ler/escrever nele."
            },
            {
                category: "L√ìGICA",
                text: "Por que usamos <code>switch</code> em vez de muitos <code>if/else</code> no main?",
                options: ["Porque √© mais r√°pido.", "Porque switch √© mais organizado e leg√≠vel para testar uma √∫nica vari√°vel (telaAtual) contra v√°rios valores constantes.", "Porque if n√£o funciona com enums.", "Tanto faz."],
                correct: 1,
                explanation: "Para m√°quinas de estado, o switch √© o padr√£o da ind√∫stria pela clareza e facilidade de adicionar novos estados (cases)."
            },
            {
                category: "L√ìGICA",
                text: "Na struct <code>Tentativa</code>, temos <code>EstadoLetra estados[10]</code>. O que isso guarda?",
                options: ["As letras digitadas.", "As cores (resultado) de cada letra (Verde, Amarelo, Cinza).", "O tempo da tentativa.", "A pontua√ß√£o."],
                correct: 1,
                explanation: "Essa array guarda o feedback do jogo. O √≠ndice 0 guarda se a primeira letra foi correta ou errada, e assim por diante."
            },
            {
                category: "INTERFACE",
                text: "Como centralizamos um bot√£o na tela?",
                options: ["X = 500", "X = LarguraTela / 2", "X = (LarguraTela - LarguraBotao) / 2", "X = 0"],
                correct: 2,
                explanation: "Se colocarmos apenas LarguraTela/2, o bot√£o come√ßa no meio e vai para a direita. Precisamos subtrair metade da largura do bot√£o (ou a largura toda se o ponto for o canto esquerdo) para centralizar perfeitamente."
            },
            {
                category: "CINEM√ÅTICA",
                text: "Se quisermos adicionar uma nova fase, o que precisamos fazer?",
                options: ["Apenas editar o CSV.", "Editar o CSV, adicionar imagens na pasta assets e atualizar o c√≥digo (defines/arrays de recursos).", "Criar um novo execut√°vel.", "Rezar."],
                correct: 1,
                explanation: "Como o c√≥digo carrega arrays fixos de texturas (`fases[15]`), precisamos garantir que os assets existam e que o c√≥digo saiba carreg√°-los, al√©m de adicionar as palavras no CSV."
            },
            {
                category: "GERAL",
                text: "O que √© o arquivo <code>.gitignore</code>?",
                options: ["Uma lista de arquivos que o Git deve ignorar (n√£o enviar para o GitHub), como bin√°rios compilados e temps.", "Arquivos deletados.", "Configura√ß√£o do jogo.", "Senha."],
                correct: 0,
                explanation: "N√£o queremos subir `.exe` ou `.o` ou pastas `.vscode` para o reposit√≥rio, pois s√£o gerados localmente ou configura√ß√µes pessoais."
            },
            {
                category: "EXTRA",
                text: "Parab√©ns, voc√™ chegou na pergunta 50! Qual a complexidade do algoritmo de busca da palavra correta?",
                options: ["O(1) - Constante.", "O(n) - Linear (percorre a palavra).", "O(n^2) - Quadr√°tica.", "O(log n) - Logar√≠tmica."],
                correct: 1,
                explanation: "O loop percorre o tamanho da palavra (que √© pequeno e fixo, max 10). √â uma opera√ß√£o linear muito r√°pida."
            }
        ];

        // Vari√°veis de Controle
        let currentQuestionIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let wrongAnswers = 0;

        // Elementos do DOM
        const startScreen = document.getElementById('startScreen');
        const questionScreen = document.getElementById('questionScreen');
        const resultScreen = document.getElementById('resultScreen');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const feedbackArea = document.getElementById('feedbackArea');
        const feedbackTitle = document.getElementById('feedbackTitle');
        const feedbackText = document.getElementById('feedbackText');
        const feedbackIcon = document.getElementById('feedbackIcon');
        const feedbackIconContainer = document.getElementById('feedbackIconContainer');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const progressBar = document.getElementById('progressBar');
        const questionCategory = document.getElementById('questionCategory');
        const currentQ = document.getElementById('currentQ');
        const totalQ = document.getElementById('totalQ');

        // Inicializa√ß√£o
        function startGame() {
            score = 0;
            currentQuestionIndex = 0;
            correctAnswers = 0;
            wrongAnswers = 0;
            scoreDisplay.innerText = "00";
            
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            questionScreen.classList.remove('hidden');
            
            loadQuestion();
        }

        function loadQuestion() {
            const q = questions[currentQuestionIndex];
            
            // Atualiza textos
            questionCategory.innerText = q.category;
            currentQ.innerText = currentQuestionIndex + 1;
            totalQ.innerText = questions.length;
            questionText.innerHTML = q.text;

            // Atualiza Barra
            const progress = ((currentQuestionIndex) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;

            // Limpa √°rea anterior
            optionsContainer.innerHTML = '';
            feedbackArea.classList.add('hidden');

            // Cria bot√µes
            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = "option-btn w-full text-left p-4 rounded-lg border border-slate-700 bg-slate-800/60 text-slate-300 font-medium hover:bg-slate-700 transition-all duration-200 flex items-center group";
                btn.innerHTML = `
                    <span class="w-8 h-8 rounded-full bg-slate-700 text-slate-400 flex items-center justify-center mr-4 text-sm font-bold group-hover:bg-orange-500 group-hover:text-white transition-colors">${String.fromCharCode(65+index)}</span>
                    <span class="flex-1">${opt}</span>
                `;
                btn.onclick = () => checkAnswer(index, btn);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, btnElement) {
            const q = questions[currentQuestionIndex];
            const buttons = optionsContainer.querySelectorAll('button');
            
            // Trava bot√µes
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.classList.add('opacity-70', 'cursor-not-allowed');
            });

            const isCorrect = selectedIndex === q.correct;

            if (isCorrect) {
                btnElement.classList.remove('bg-slate-800/60', 'border-slate-700');
                btnElement.classList.add('bg-green-500/20', 'border-green-500', 'text-green-400');
                btnElement.querySelector('span').classList.add('bg-green-500', 'text-white');
                
                score += 100;
                correctAnswers++;
                showFeedback(true, q.explanation);
            } else {
                btnElement.classList.remove('bg-slate-800/60', 'border-slate-700');
                btnElement.classList.add('bg-red-500/20', 'border-red-500', 'text-red-400');
                btnElement.querySelector('span').classList.add('bg-red-500', 'text-white');
                
                // Mostra a certa
                const correctBtn = buttons[q.correct];
                correctBtn.classList.remove('bg-slate-800/60', 'border-slate-700');
                correctBtn.classList.add('bg-green-500/20', 'border-green-500', 'text-green-400');
                
                wrongAnswers++;
                showFeedback(false, q.explanation);
            }
            
            scoreDisplay.innerText = score;
        }

        function showFeedback(isCorrect, text) {
            feedbackArea.classList.remove('hidden');
            
            if (isCorrect) {
                feedbackTitle.innerText = "Resposta Correta! üî•";
                feedbackTitle.className = "text-lg font-bold text-green-400 mb-2";
                feedbackIcon.className = "fas fa-check text-xl text-white";
                feedbackIconContainer.className = "p-3 rounded-full bg-green-500 shrink-0 shadow-lg shadow-green-500/30";
            } else {
                feedbackTitle.innerText = "Resposta Incorreta ‚ö†Ô∏è";
                feedbackTitle.className = "text-lg font-bold text-red-400 mb-2";
                feedbackIcon.className = "fas fa-times text-xl text-white";
                feedbackIconContainer.className = "p-3 rounded-full bg-red-500 shrink-0 shadow-lg shadow-red-500/30";
            }

            feedbackText.innerHTML = text;
            
            // Scroll suave para o feedback em telas pequenas
            setTimeout(() => {
                feedbackArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                finishGame();
            }
        }

        function finishGame() {
            questionScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            progressBar.style.width = '100%';

            document.getElementById('finalScore').innerText = score;
            document.getElementById('correctCount').innerText = correctAnswers;
            document.getElementById('wrongCount').innerText = wrongAnswers;

            // L√≥gica de Ranking
            const percentage = (correctAnswers / questions.length) * 100;
            let rank = "ESTUDANTE";
            let colorClass = "text-slate-400";
            let emoji = "ü§ï";

            if (percentage === 100) { rank = "HOKAGE LEND√ÅRIO üåü"; colorClass = "text-orange-500 border-orange-500 bg-orange-500/10"; emoji = "üëë"; }
            else if (percentage >= 90) { rank = "KAGE ‚öîÔ∏è"; colorClass = "text-red-500 border-red-500 bg-red-500/10"; emoji = "üî•"; }
            else if (percentage >= 75) { rank = "JONIN ü•∑"; colorClass = "text-purple-500 border-purple-500 bg-purple-500/10"; emoji = "‚ö°"; }
            else if (percentage >= 50) { rank = "CHUNIN üìú"; colorClass = "text-green-500 border-green-500 bg-green-500/10"; emoji = "üçÉ"; }
            else if (percentage >= 20) { rank = "GENIN ü•ö"; colorClass = "text-blue-400 border-blue-400 bg-blue-400/10"; emoji = "üíß"; }

            const rankEl = document.getElementById('finalRank');
            rankEl.innerText = rank;
            rankEl.className = `text-2xl font-black mb-10 inline-block px-8 py-4 rounded-2xl border-2 shadow-2xl ${colorClass}`;
            document.getElementById('rankIcon').innerText = emoji;
        }
    </script>
</body>
</html>
